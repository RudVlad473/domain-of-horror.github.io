{"version":3,"file":"690.chunk.js","mappings":"s3BA2BA,MCFA,EApB2B,SACvBA,EACAC,EACAC,GAGA,IAAMC,EDRiB,SAACH,EAAkBE,GAqB1C,OApBwBE,EAAAA,EAAAA,UAAQ,WAC5B,IAAKF,EACD,OAAOF,EAGX,IAAMK,EAAgBH,EAAUI,cAEhC,MACS,eADDD,EAEO,EAAIL,GAAWO,MAClB,SAACC,EAAGC,GAAJ,OAAUA,EAAEJ,GAAiBG,EAAEH,EAA/B,IAIG,EAAIL,GAAWO,MAAK,SAACC,EAAGC,GAAJ,uBACvBD,EAAEH,UADqB,aACvB,EAAkBK,cAAcD,EAAEJ,GADX,GAKtC,GAAE,CAACL,EAAWE,GAElB,CCd2BS,CAAmBX,EAAWE,GAWtD,OATwBE,EAAAA,EAAAA,UAAQ,WAC5B,OCdeQ,EDcMX,ECbjBY,OAAOC,OAAOF,GAAKG,MAAK,SAACC,GAAD,OAAOA,CAAP,IDetBb,aAFC,EAEDA,EAAiBF,QAAO,SAACgB,GAAD,uBACpBA,EAAQhB,EAAOC,UAAUI,sBADL,aACpB,EACMA,cACDY,SAASjB,EAAOkB,YAAYb,cAHb,IADxBH,ECfd,IAAuBS,CDqBlB,GAAE,CAACZ,EAAWE,EAAWD,GAE7B,E,+BErBYmB,EAAwB,IAAIC,sBACrC,SAACC,GACGA,EAAQC,SAAQ,SAACC,GACbA,EAAMC,OAAOC,UAAUC,OACnBC,EAAAA,EAAAA,OACAJ,EAAMK,eAEb,GACJ,GACD,CACIC,UAAW,K,0GCOnB,IAAMC,EAAkBC,EAAAA,MACpB,kBAAM,4BAAN,IAsDJ,QAnD+C,SAAC,GAA8B,I,IAA5B/B,EAA4B,EAA5BA,OAAQI,EAAoB,EAApBA,cAC9CL,GACJiC,EAAAA,EAAAA,YAAWC,EAAAA,GADPlC,UAEFmC,EAAkBC,EAAmBpC,EAAWC,EAAQI,GAExDgC,GAAeC,EAAAA,EAAAA,UACfC,GAAwBD,EAAAA,EAAAA,UACxBE,GAAcF,EAAAA,EAAAA,UAMpB,G,GAAkCG,EAAAA,EAAAA,UAFD,I,EAEjC,E,8zBAAOC,EAAP,KAAkBC,EAAlB,KAEMC,GAAgBxC,EAAAA,EAAAA,UAAQ,WAC1B,OAA4B,IAArBJ,EAAU6C,MACpB,GAAE,CAAC7C,IAcJ,OAZA8C,EAAAA,EAAAA,YAAU,WACNT,EAAaU,QAAU3B,EACvBmB,EAAsBQ,QAAU,IAAI1B,sBAAqB,SAACC,GACrCA,EAAQ,GACXO,gBAAkBa,EAAY1C,EAAU6C,QAClDF,GAAa,SAACD,GAAD,OAAeA,EAbP,EAaR,GAEpB,IAEDH,EAAsBQ,QAAQC,QAAQR,EAAYO,QACrD,GAAE,CAACH,IAGA,gCACKA,GAAiB,gBAACK,EAAA,EAAD,MAElB,gBAACC,EAAA,EAAD,CACIC,OAAK,EACLC,UAAU,oCACV,gBAACrB,EAAD,CACII,gBAAiBA,aAAF,EAAEA,EAAiBkB,MAAM,EAAGX,GAC3CL,aAAcA,IAGlB,uBACIiB,IAAKd,EACLY,UAAU,kBAI7B,C,iCCvED,SAAgB,KAAO,uBAAuB,OAAS,uBAAuB,IAAM,uBAAuB,OAAS,uBAAuB,UAAY,uBAAuB,MAAQ,uB","sources":["webpack:///./src/hooks/useSortedCountries.tsx","webpack:///./src/hooks/useCookedCountries.tsx","webpack:///./src/helpers/functions/isObjectEmpty.ts","webpack:///./src/components/CountriesGrid/IntersectionObservers/cardAnimationObserver.ts","webpack:///./src/components/CountriesGrid/CountriesGrid.tsx","webpack:///./src/components/CountryCard/CountryCard.module.scss?2ed1"],"sourcesContent":["import { useMemo } from \"react\"\r\nimport ICountryCard from \"../components/CountryCard/ICountryCard\"\r\n\r\nconst useSortedCountries = (countries: any[], fieldName: string) => {\r\n    const sortedCountries = useMemo(() => {\r\n        if (!fieldName) {\r\n            return countries\r\n        }\r\n\r\n        const fieldToSortBy = fieldName.toLowerCase()\r\n\r\n        switch (fieldToSortBy) {\r\n            case \"population\": {\r\n                return [...countries].sort(\r\n                    (a, b) => b[fieldToSortBy] - a[fieldToSortBy]\r\n                )\r\n            }\r\n            default: {\r\n                return [...countries].sort((a, b) =>\r\n                    a[fieldToSortBy]?.localeCompare(b[fieldToSortBy])\r\n                )\r\n            }\r\n        }\r\n    }, [countries, fieldName])\r\n    return sortedCountries\r\n}\r\n\r\nexport default useSortedCountries\r\n","import { useMemo } from \"react\"\r\nimport ICountryCard from \"../components/CountryCard/ICountryCard\"\r\nimport isObjectEmpty from \"../helpers/functions/isObjectEmpty\"\r\nimport useSortedCountries from \"./useSortedCountries\"\r\n\r\nconst useCookedCountries = (\r\n    countries: any[],\r\n    filter: Object,\r\n    fieldName: string\r\n) => {\r\n    //sorts and filters\r\n    const sortedCountries = useSortedCountries(countries, fieldName)\r\n\r\n    const cookedCountries = useMemo(() => {\r\n        return isObjectEmpty(filter)\r\n            ? sortedCountries\r\n            : sortedCountries?.filter((country) =>\r\n                  country[filter.fieldName.toLowerCase()]\r\n                      ?.toLowerCase()\r\n                      .includes(filter.searchQuery.toLowerCase())\r\n              )\r\n    }, [countries, fieldName, filter])\r\n    return cookedCountries\r\n}\r\n\r\nexport default useCookedCountries\r\n","function isObjectEmpty(obj: Object): boolean {\r\n    return !Object.values(obj).some((i) => i)\r\n}\r\n\r\nexport default isObjectEmpty\r\n","import cardStyles from \"../../CountryCard/CountryCard.module.scss\"\r\n\r\nexport const cardAnimationObserver = new IntersectionObserver(\r\n    (entries) => {\r\n        entries.forEach((entry) => {\r\n            entry.target.classList.toggle(\r\n                cardStyles[\"active\"],\r\n                entry.isIntersecting\r\n            )\r\n        })\r\n    },\r\n    {\r\n        threshold: 0.5,\r\n    }\r\n)\r\n","import React, {\r\n    FC,\r\n    useContext,\r\n    useEffect,\r\n    useMemo,\r\n    useRef,\r\n    useState,\r\n} from \"react\"\r\nimport { Container } from \"react-bootstrap\"\r\nimport CountryCard from \"../CountryCard/CountryCard\"\r\nimport separateNumber from \"../../helpers/functions/separateNumber\"\r\nimport useCookedCountries from \"../../hooks/useCookedCountries\"\r\nimport Loading from \"../UI/Loading/Loading\"\r\nimport { CountriesContext } from \"../../context\"\r\n//import LoadCountriesObserver from \"./loadCountriesObserver\"\r\nimport { cardAnimationObserver } from \"./IntersectionObservers/cardAnimationObserver\"\r\nimport ICountriesGridProps from \"./ICountriesGrid\"\r\nimport ICountryCard from \"../CountryCard/ICountryCard\"\r\n\r\nconst CookedCountries = React.lazy(\r\n    () => import(\"./CookedCountries/CookedCountries\")\r\n)\r\n\r\nconst CountriesGrid: FC<ICountriesGridProps> = ({ filter, fieldToSortBy }) => {\r\n    const { countries }: { countries: ICountryCard[] } =\r\n        useContext(CountriesContext)!\r\n    const cookedCountries = useCookedCountries(countries, filter, fieldToSortBy)\r\n\r\n    const cardObserver = useRef<IntersectionObserver>()\r\n    const loadCountriesObserver = useRef<IntersectionObserver>()\r\n    const lastElemRef = useRef()!\r\n\r\n    // const defaultLoadCount: number =\r\n    //     (countries.length / 10) | 0 || countries.length\r\n    const defaultLoadCount: number = 25\r\n\r\n    const [loadCount, setLoadCount] = useState(defaultLoadCount)\r\n\r\n    const isDataLoading = useMemo(() => {\r\n        return countries.length === 0\r\n    }, [countries])\r\n\r\n    useEffect(() => {\r\n        cardObserver.current = cardAnimationObserver\r\n        loadCountriesObserver.current = new IntersectionObserver((entries) => {\r\n            const lastElem = entries[0]\r\n            if (lastElem!.isIntersecting && loadCount < countries.length) {\r\n                setLoadCount((loadCount) => loadCount + defaultLoadCount)\r\n            }\r\n        })\r\n\r\n        loadCountriesObserver.current.observe(lastElemRef.current!)\r\n    }, [isDataLoading])\r\n\r\n    return (\r\n        <>\r\n            {isDataLoading && <Loading />}\r\n\r\n            <Container\r\n                fluid\r\n                className=\"px-3 px-md-5 py-3 countries-grid\">\r\n                <CookedCountries\r\n                    cookedCountries={cookedCountries?.slice(0, loadCount)}\r\n                    cardObserver={cardObserver}\r\n                />\r\n\r\n                <div\r\n                    ref={lastElemRef!}\r\n                    className=\"load-trigger\"></div>\r\n            </Container>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default CountriesGrid\r\n","// extracted by mini-css-extract-plugin\nexport default {\"card\":\"_mIESs6x4bmN8T_bV24N\",\"active\":\"x2UMtOkO5Z23cyJYWIhY\",\"img\":\"X6y3R94hsNQ6Sd9Jj75w\",\"header\":\"jKPa9VCwA1LTwiv_RAei\",\"attribute\":\"pZXbB86KrhhRNHmg5gCp\",\"value\":\"zl8IYhRRl09_JwgB7lg7\"};"],"names":["countries","filter","fieldName","sortedCountries","useMemo","fieldToSortBy","toLowerCase","sort","a","b","localeCompare","useSortedCountries","obj","Object","values","some","i","country","includes","searchQuery","cardAnimationObserver","IntersectionObserver","entries","forEach","entry","target","classList","toggle","cardStyles","isIntersecting","threshold","CookedCountries","React","useContext","CountriesContext","cookedCountries","useCookedCountries","cardObserver","useRef","loadCountriesObserver","lastElemRef","useState","loadCount","setLoadCount","isDataLoading","length","useEffect","current","observe","Loading","Container","fluid","className","slice","ref"],"sourceRoot":""}